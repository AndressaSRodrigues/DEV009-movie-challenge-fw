<section class="h-full">
    <section class="flex flex-row justify-start mx-5 lg:mx-20">
        <h1 class="text-6xl text-yellow mx-4 my-4 lg:mx-14 lg:my-10">Movies</h1>
        <img src="../../../assets/arrow-down.svg" alt="More options" width="30" class="options-icon"
            (click)="toggleOptions()" *ngIf="isMobile" />

        <div class="flex flex-col items-start absolute top-40 bg-gray w-full text-2xl ml-4 lg:flex-row lg:justify-evenly lg:w-3/4 lg:top-28 lg:right-0 lg:bg-transparent z-10"
            *ngIf="showOptions || !isMobile">

            <button [ngClass]="visibleMovies === 'popular' ? 'text-yellow overline' : 'text-white'"
                (click)="displayMovies('popular', 1)">New & popular</button>

            <button [ngClass]="visibleMovies === 'upcoming' ? 'text-yellow overline' : 'text-white'"
                (click)="displayMovies('upcoming', 1)">Upcoming</button>

            <button [ngClass]="visibleMovies === 'top_rated' ? 'text-yellow overline' : 'text-white'"
                (click)="displayMovies('top_rated', 1)">Top Rated</button>

            <button [ngClass]="visibleMovies === undefined ? 'text-yellow overline' : 'text-white'"
                (click)="toggleGenresMenu()">Browse by genre</button>

        </div>

        <div class="hidden flex flex-col flex-wrap bg-gray  text-lg absolute h-64 w-96 top-72 left-8 justify-start p-2 lg:w-96 lg:top-40 lg:left-2/3 border border-solid border-yellow z-10"
            [class.hidden]="!genresMenu">
            <div class="h-full p-1 cursor-pointer">
                <img src="../../../assets/close.svg" alt="Close" width="15" (click)="toggleGenresMenu()">
            </div>

            <div *ngFor="let genre of genreTitles">
                <div>
                    <span class="text-1xl cursor-pointer hover:text-yellow"
                        (click)="displayMovies(undefined, 1, genre.id)">{{ genre.name }}</span>
                </div>
            </div>
        </div>
    </section>

    <section class="flex flex-row flex-wrap justify-center mx-5 lg:mx-20 z-0" infiniteScroll
        [infiniteScrollDistance]="2" [infiniteScrollThrottle]="50" (scrolled)="onScroll()">

        <h2 *ngIf="visibleMovies !== undefined" class="w-full text-2xl mx-4 my-4 lg:mx-14 lg:my-10">
            {{ title }}
            <hr class="border border-solid border-yellow w-full">
        </h2>

        <h2 *ngIf="visibleMovies === undefined" class="w-full text-2xl mx-4 my-4 lg:mx-14 lg:my-10">
        {{ selectedGenreName }}
            <hr class="border border-solid border-yellow w-full">
        </h2>

        <div *ngFor="let movie of currentMovies" class="p-1 lg:p-2">
            <a [routerLink]="['/movies', movie.id]" target="_blank">
                <div class="relative">
                    <img [src]="'https://image.tmdb.org/t/p/w500/' + movie.poster_path" [alt]="movie.title"
                        class="w-36 lg:w-40" />
                    <div
                        class="opacity-0 absolute inset-0 flex text-center justify-center items-center bg-black bg-opacity-75 text-white text-lg transition duration-300 opacity-0 hover:opacity-100 focus:opacity-100">
                        {{ movie.title }}
                    </div>
                </div>
            </a>
            <div class="flex flex-row mt-2 items-center" *ngIf="visibleMovies === 'top_rated'">
                <img src="../../../assets/star.png" alt="Rates" class="w-4 h-4" />
                <span class="ml-3">{{ movie.vote_average }}</span>
            </div>
        </div>
    </section>
</section>